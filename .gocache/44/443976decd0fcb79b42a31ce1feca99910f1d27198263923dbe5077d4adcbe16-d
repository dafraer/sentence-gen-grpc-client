// Code generated by cmd/cgo; DO NOT EDIT.

//line /Users/kamil/go/pkg/mod/fyne.io/systray@v1.12.0/systray_darwin.go:1:1
//go:build !ios

package systray

/*
#cgo darwin CFLAGS: -DDARWIN -x objective-c -fobjc-arc
#cgo darwin LDFLAGS: -framework Cocoa

#include <stdbool.h>
#include "systray.h"

void setInternalLoop(bool);
*/
import _ "unsafe"

import (
	"fmt"
	"os"
	"unsafe"
)

// SetTemplateIcon sets the systray icon as a template icon (on Mac), falling back
// to a regular icon on other platforms.
// templateIconBytes and regularIconBytes should be the content of .ico for windows and
// .ico/.jpg/.png for other platforms.
func SetTemplateIcon(templateIconBytes []byte, regularIconBytes []byte) {
	cstr := (* /*line :27:12*/_Ctype_char /*line :27:18*/)(unsafe.Pointer(&templateIconBytes[0]))
	( /*line :28:2*/_Cfunc_setIcon /*line :28:10*/)(cstr, ( /*line :28:19*/_Ctype_int /*line :28:24*/)(len(templateIconBytes)), true)
}

// SetIcon sets the icon of a menu item. Only works on macOS and Windows.
// iconBytes should be the content of .ico/.jpg/.png
func (item *MenuItem) SetIcon(iconBytes []byte) {
	cstr := (* /*line :34:12*/_Ctype_char /*line :34:18*/)(unsafe.Pointer(&iconBytes[0]))
	( /*line :35:2*/_Cfunc_setMenuItemIcon /*line :35:18*/)(cstr, ( /*line :35:27*/_Ctype_int /*line :35:32*/)(len(iconBytes)),  /*line :35:51*/_Ctype_int /*line :35:56*/(item.id), false)
}

// SetIconFromFilePath sets the icon of a menu item from a file path.
// iconFilePath should be the path to a .ico for windows and .ico/.jpg/.png for other platforms.
func (item *MenuItem) SetIconFromFilePath(iconFilePath string) error {
	iconBytes, err := os.ReadFile(iconFilePath)
	if err != nil {
		return fmt.Errorf("failed to read icon file: %v", err)
	}
	item.SetIcon(iconBytes)
	return nil
}

// SetTemplateIcon sets the icon of a menu item as a template icon (on macOS). On Windows, it
// falls back to the regular icon bytes and on Linux it does nothing.
// templateIconBytes and regularIconBytes should be the content of .ico for windows and
// .ico/.jpg/.png for other platforms.
func (item *MenuItem) SetTemplateIcon(templateIconBytes []byte, regularIconBytes []byte) {
	cstr := (* /*line :54:12*/_Ctype_char /*line :54:18*/)(unsafe.Pointer(&templateIconBytes[0]))
	( /*line :55:2*/_Cfunc_setMenuItemIcon /*line :55:18*/)(cstr, ( /*line :55:27*/_Ctype_int /*line :55:32*/)(len(templateIconBytes)),  /*line :55:59*/_Ctype_int /*line :55:64*/(item.id), true)
}

// SetRemovalAllowed sets whether a user can remove the systray icon or not.
// This is only supported on macOS.
func SetRemovalAllowed(allowed bool) {
	( /*line :61:2*/_Cfunc_setRemovalAllowed /*line :61:20*/)(( /*line :61:23*/_Ctype_bool /*line :61:29*/)(allowed))
}

func registerSystray() {
	( /*line :65:2*/_Cfunc_registerSystray /*line :65:18*/)()
}

func nativeLoop() {
	( /*line :69:2*/_Cfunc_nativeLoop /*line :69:13*/)()
}

func nativeEnd() {
	( /*line :73:2*/_Cfunc_nativeEnd /*line :73:12*/)()
}

func nativeStart() {
	( /*line :77:2*/_Cfunc_nativeStart /*line :77:14*/)()
}

func quit() {
	( /*line :81:2*/_Cfunc_quit /*line :81:7*/)()
}

func setInternalLoop(internal bool) {
	( /*line :85:2*/_Cfunc_setInternalLoop /*line :85:18*/)( /*line :85:20*/_Ctype_bool /*line :85:26*/(internal))
}

// SetIcon sets the systray icon.
// iconBytes should be the content of .ico for windows and .ico/.jpg/.png
// for other platforms.
func SetIcon(iconBytes []byte) {
	cstr := (* /*line :92:12*/_Ctype_char /*line :92:18*/)(unsafe.Pointer(&iconBytes[0]))
	( /*line :93:2*/_Cfunc_setIcon /*line :93:10*/)(cstr, ( /*line :93:19*/_Ctype_int /*line :93:24*/)(len(iconBytes)), false)
}

// SetIconFromFilePath sets the systray icon from a file path.
// iconFilePath should be the path to a .ico for windows and .ico/.jpg/.png for other platforms.
func SetIconFromFilePath(iconFilePath string) error {
	bytes, err := os.ReadFile(iconFilePath)
	if err != nil {
		return fmt.Errorf("failed to read icon file: %v", err)
	}
	SetIcon(bytes)
	return nil
}

// SetTitle sets the systray title, only available on Mac and Linux.
func SetTitle(title string) {
	( /*line :109:2*/_Cfunc_setTitle /*line :109:11*/)(( /*line :109:13*/_Cfunc_CString /*line :109:21*/)(title))
}

// SetTooltip sets the systray tooltip to display on mouse hover of the tray icon,
// only available on Mac and Windows.
func SetTooltip(tooltip string) {
	( /*line :115:2*/_Cfunc_setTooltip /*line :115:13*/)(( /*line :115:15*/_Cfunc_CString /*line :115:23*/)(tooltip))
}

func addOrUpdateMenuItem(item *MenuItem) {
	var disabled  /*line :119:15*/_Ctype_short /*line :119:22*/
	if item.disabled {
		disabled = 1
	}
	var checked  /*line :123:14*/_Ctype_short /*line :123:21*/
	if item.checked {
		checked = 1
	}
	var isCheckable  /*line :127:18*/_Ctype_short /*line :127:25*/
	if item.isCheckable {
		isCheckable = 1
	}
	var parentID uint32 = 0
	if item.parent != nil {
		parentID = item.parent.id
	}
	( /*line :135:2*/_Cfunc_add_or_update_menu_item /*line :135:26*/)(
		 /*line :136:3*/_Ctype_int /*line :136:8*/(item.id),
		 /*line :137:3*/_Ctype_int /*line :137:8*/(parentID),
		( /*line :138:3*/_Cfunc_CString /*line :138:11*/)(item.title),
		( /*line :139:3*/_Cfunc_CString /*line :139:11*/)(item.tooltip),
		disabled,
		checked,
		isCheckable,
	)
}

func addSeparator(id uint32, parent uint32) {
	( /*line :147:2*/_Cfunc_add_separator /*line :147:16*/)( /*line :147:18*/_Ctype_int /*line :147:23*/(id),  /*line :147:29*/_Ctype_int /*line :147:34*/(parent))
}

func hideMenuItem(item *MenuItem) {
	( /*line :151:2*/_Cfunc_hide_menu_item /*line :151:17*/)(
		 /*line :152:3*/_Ctype_int /*line :152:8*/(item.id),
	)
}

func showMenuItem(item *MenuItem) {
	( /*line :157:2*/_Cfunc_show_menu_item /*line :157:17*/)(
		 /*line :158:3*/_Ctype_int /*line :158:8*/(item.id),
	)
}

func removeMenuItem(item *MenuItem) {
	( /*line :163:2*/_Cfunc_remove_menu_item /*line :163:19*/)(
		 /*line :164:3*/_Ctype_int /*line :164:8*/(item.id),
	)
}

func resetMenu() {
	( /*line :169:2*/_Cfunc_reset_menu /*line :169:13*/)()
}

//export systray_left_click
func systray_left_click() {
	if fn := tappedLeft; fn != nil {
		fn()
		return
	}

	( /*line :179:2*/_Cfunc_show_menu /*line :179:12*/)()
}

//export systray_right_click
func systray_right_click() {
	if fn := tappedRight; fn != nil {
		fn()
		return
	}

	( /*line :189:2*/_Cfunc_show_menu /*line :189:12*/)()
}

//export systray_ready
func systray_ready() {
	systrayReady()
}

//export systray_on_exit
func systray_on_exit() {
	runSystrayExit()
}

//export systray_menu_item_selected
func systray_menu_item_selected(cID  /*line :203:37*/_Ctype_int /*line :203:42*/) {
	systrayMenuItemSelected(uint32(cID))
}

//export systray_menu_will_open
func systray_menu_will_open() {
	select {
	case TrayOpenedCh <- struct{}{}:
	default:
	}
}
